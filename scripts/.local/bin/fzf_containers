#!/bin/sh
# Enter a shell inside a running Docker container.
# .docker_aliases script is required.
# Docker commands are different from the default here.

command -v docker-alias-wrapper > /dev/null ||
    echo 'docker-alias-wrapper script is required' &&
    exit 1

FZF_DEFAULT_OPTS="--reverse --height 40% $FZF_DEFAULT_OPTS"

choice="$(docker-alias-wrapper ps |
    awk 'NR>1 {print $3}' |
    fzf)"

[ -z "$choice" ] && exit 1

docker-alias-wrapper ex "$choice"

# Add newline at the end.
echo
