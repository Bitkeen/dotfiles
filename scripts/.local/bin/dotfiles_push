#!/bin/sh
# Push dotfiles repo changes to origin, rebasing each branch on master.
initial_dir="$PWD"

cd "$DOTFILES_DIR" || return 1
git checkout master && git push &&
git checkout arch && git rebase master && git push -f &&
git checkout mac && git rebase master && git push -f &&
git checkout termux && git rebase master && git push -f &&
if [ -n "$1" ]; then
    git checkout "$1"
else
    git checkout master
fi
cd "$initial_dir"
